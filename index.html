<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Web RPG Maker Editor</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="editor-container">
        <header id="toolbar">
            <div class="tool-group">
                <button id="btn-save">프로젝트 저장</button>
            </div>
            <div class="tool-group">
                <label>레이어:</label>
                <select id="layer-select">
                    <option value="0">L1 (하층)</option>
                    <option value="1">L2</option>
                    <option value="2">L3</option>
                    <option value="3">L4</option>
                    <option value="4">L5 (상층)</option>
                </select>
            </div>
            <div class="tool-group">
                <label>인스펙터 폰트:</label>
                <input type="range" id="inspector-font-size" min="8" max="16" value="11" style="width: 120px;">
                <span id="font-size-display" style="margin-left: 4px; font-size: 12px; min-width: 30px;">11px</span>
            </div>
            <div class="tool-group">
                <span id="map-info">Map000 (0x0)</span>
            </div>
        </header>

        <main id="workspace">
            <aside id="side-panel">
                <section id="tileset-window">
                    <div class="panel-header">타일셋 뷰</div>
                    <div id="tileset-view-container">
                        <canvas id="tileset-canvas"></canvas>
                        <div id="tileset-selection-rect"></div>
                    </div>
                </section>

                <section id="map-management">
                    <div class="tileset-tabs">
                        <button class="tab-btn active" data-tab="A">A</button>
                        <button class="tab-btn" data-tab="B">B</button>
                        <button class="tab-btn" data-tab="C">C</button>
                        <button class="tab-btn" data-tab="D">D</button>
                        <button class="tab-btn" data-tab="E">E</button>
                    </div>
                    <div id="map-tree">
                        <div class="panel-header">맵 목록</div>
                        <ul id="map-list">
                        </ul>
                    </div>
                </section>
            </aside>

            <section id="map-editor">
                <div id="map-grid-container">
                    <canvas id="map-canvas"></canvas>
                    <canvas id="map-overlay-canvas"
                        style="position: absolute; left: 0; top: 0; pointer-events: none;"></canvas>
                </div>
            </section>

            <aside id="inspector-panel">
                <div id="inspector-resizer" class="inspector-resizer"></div>
                <div class="panel-header">이벤트 인스펙터</div>

                <div id="inspector-empty" class="inspector-content">
                    <p class="empty-msg">편집할 이벤트를 선택하세요.</p>
                </div>

                <div id="inspector-main" class="inspector-content" style="display: none;">
                    <!-- 최상단: 이벤트 정보 -->
                    <section class="ins-section" style="display: flex; gap: 8px; margin-bottom: 12px;">
                        <div class="ins-row" style="flex: 1;">
                            <label>이름</label>
                            <input type="text" id="ins-name" placeholder="이벤트 이름">
                        </div>
                        <div class="ins-row" style="flex: 1;">
                            <label>노트</label>
                            <input type="text" id="ins-note" placeholder="이벤트 노트">
                        </div>
                    </section>

                    <!-- 버튼 그룹 -->
                    <div class="ins-button-group">
                        <button class="ins-btn" id="ins-btn-new">새로 만들기</button>
                        <button class="ins-btn" id="ins-btn-copy">복사</button>
                        <button class="ins-btn" id="ins-btn-paste">붙여넣기</button>
                        <button class="ins-btn" id="ins-btn-delete">삭제</button>
                        <button class="ins-btn" id="ins-btn-clear">비우기</button>
                    </div>
                        <div id="ins-page-tab-container" style="display: flex; gap: 2px; overflow-x: auto; padding-bottom: 4px;"></div>

                    <!-- 페이지 탭 -->
                    <div class="ins-tabs" style="display: flex; background: #333;">
                        <button class="ins-page-tab active" data-tab="setting" style="flex: 1;">페이지 설정</button>
                        <button class="ins-page-tab" data-tab="commands" style="flex: 1;">실행 내용</button>
                    </div>

                    <!-- 페이지 내용 -->
                    <div id="ins-page-content"
                        style="display: flex; flex-direction: column; flex: 1; overflow: hidden;">

                        <!-- 페이지 설정 탭 내용 -->
                        <div id="ins-setting-content" class="ins-tab-content"
                            style="display: flex; flex-direction: column; flex: 1; overflow-y: auto;">

                            <!-- 조건 섹션 (맨 위) -->
                            <section class="ins-section">
                                <div class="ins-label">조건</div>
                                <div style="display: flex; gap: 12px; margin-bottom: 8px;">
                                    <div class="ins-row" style="flex: 1;">
                                        <label style="display: flex; align-items: center; gap: 4px;">
                                            <input type="checkbox" id="ins-switch1-check" style="cursor: pointer;">
                                            스위치1
                                        </label>
                                        <button id="ins-switch1-selector" class="ins-selector-btn" style="width: 100%; padding: 6px; font-size: 11px; margin-top: 4px; text-align: left;">선택</button>
                                        <span id="ins-switch1-name" style="font-size: 10px; color: #999; margin-top: 4px; display: block;"></span>
                                    </div>
                                    <div class="ins-row" style="flex: 1;">
                                        <label style="display: flex; align-items: center; gap: 4px;">
                                            <input type="checkbox" id="ins-switch2-check" style="cursor: pointer;">
                                            스위치2
                                        </label>
                                        <button id="ins-switch2-selector" class="ins-selector-btn" style="width: 100%; padding: 6px; font-size: 11px; margin-top: 4px; text-align: left;">선택</button>
                                        <span id="ins-switch2-name" style="font-size: 10px; color: #999; margin-top: 4px; display: block;"></span>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 12px;">
                                    <div class="ins-row" style="flex: 1;">
                                        <label style="display: flex; align-items: center; gap: 4px;">
                                            <input type="checkbox" id="ins-self-switch-check" style="cursor: pointer;">
                                            셀프 스위치
                                        </label>
                                        <select id="ins-self-switch"
                                            style="width: 100%; padding: 4px; font-size: 11px;">
                                            <option value="A">A</option>
                                            <option value="B">B</option>
                                            <option value="C">C</option>
                                            <option value="D">D</option>
                                        </select>
                                    </div>
                                    <div class="ins-row" style="flex: 1;">
                                        <label style="display: flex; align-items: center; gap: 4px;">
                                            <input type="checkbox" id="ins-variable-check" style="cursor: pointer;">
                                            변수
                                        </label>
                                        <button id="ins-variable-selector" class="ins-selector-btn" style="width: 100%; padding: 6px; font-size: 11px; margin-top: 4px; text-align: left;">선택</button>
                                        <div style="display: flex; gap: 4px; margin-top: 4px;">
                                            <input type="number" id="ins-variable-value" placeholder="값"
                                                style="flex: 1; padding: 4px; font-size: 11px;">
                                        </div>
                                        <span id="ins-variable-name" style="font-size: 10px; color: #999; margin-top: 4px; display: block;"></span>
                                    </div>
                                </div>
                            </section>

                            <!-- 이미지와 옵션 (가로 배치) -->
                            <div style="display: flex; gap: 8px; margin-bottom: 8px; align-items: flex-start;">
                                <!-- 이미지 섹션 (왼쪽) -->
                                <section class="ins-section" style="flex: 0 0 auto; display: flex; flex-direction: column;">
                                    <div class="ins-label">이미지</div>
                                    <div id="ins-preview"
                                        style="display: flex; justify-content: center; align-items: center; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; width: 120px; height: 120px; flex-shrink: 0;">
                                    </div>
                                </section>

                                <!-- 옵션 섹션 (오른쪽) -->
                                <section class="ins-section" style="flex: 1; display: flex; flex-direction: column;">
                                    <div class="ins-label">옵션</div>
                                    <div style="overflow-y: auto; flex: 1;">
                                        <div class="ins-row"
                                            style="flex-direction: row; justify-content: space-between; align-items: center;">
                                            <label>보행 움직임</label>
                                            <button id="ins-walk-anime" class="ins-toggle-btn" data-setting="walkAnime"
                                                style="width: 50px; padding: 4px; background: #1a1a1a; border: 1px solid #555; border-radius: 2px; color: #fff; cursor: pointer; font-size: 11px;">OFF</button>
                                        </div>
                                        <div class="ins-row"
                                            style="flex-direction: row; justify-content: space-between; align-items: center;">
                                            <label>제자리 움직임</label>
                                            <button id="ins-step-anime" class="ins-toggle-btn" data-setting="stepAnime"
                                                style="width: 50px; padding: 4px; background: #1a1a1a; border: 1px solid #555; border-radius: 2px; color: #fff; cursor: pointer; font-size: 11px;">OFF</button>
                                        </div>
                                        <div class="ins-row"
                                            style="flex-direction: row; justify-content: space-between; align-items: center;">
                                            <label>방향 고정</label>
                                            <button id="ins-dir-fix" class="ins-toggle-btn" data-setting="directionFix"
                                                style="width: 50px; padding: 4px; background: #1a1a1a; border: 1px solid #555; border-radius: 2px; color: #fff; cursor: pointer; font-size: 11px;">OFF</button>
                                        </div>
                                        <div class="ins-row"
                                            style="flex-direction: row; justify-content: space-between; align-items: center;">
                                            <label>통과</label>
                                            <button id="ins-through" class="ins-toggle-btn" data-setting="through"
                                                style="width: 50px; padding: 4px; background: #1a1a1a; border: 1px solid #555; border-radius: 2px; color: #fff; cursor: pointer; font-size: 11px;">OFF</button>
                                        </div>
                                    </div>
                                </section>
                            </div>

                            <!-- 우선권과 발동 (한 행) -->
                            <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <div class="ins-row" style="flex: 1;">
                                    <label>우선권</label>
                                    <select id="ins-priority" style="width: 100%; padding: 4px; font-size: 11px;">
                                        <option value="0">아래</option>
                                        <option value="1">동일</option>
                                        <option value="2">위</option>
                                    </select>
                                </div>
                                <div class="ins-row" style="flex: 1;">
                                    <label>발동</label>
                                    <select id="ins-trigger" style="width: 100%; padding: 4px; font-size: 11px;">
                                        <option value="0">결정키</option>
                                        <option value="1">플레이어 접근</option>
                                        <option value="2">이벤트 접근</option>
                                        <option value="3">자동</option>
                                        <option value="4">병렬</option>
                                    </select>
                                </div>
                            </div>

                            <!-- 이동 설정 (한 행) -->
                            <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <div class="ins-row" style="flex: 1;">
                                    <label>타입</label>
                                    <select id="ins-move-type" style="width: 100%; padding: 4px; font-size: 11px;">
                                        <option value="0">고정</option>
                                        <option value="1">랜덤</option>
                                        <option value="2">접근</option>
                                        <option value="3">커스텀</option>
                                    </select>
                                </div>
                                <div class="ins-row" style="flex: 1;">
                                    <label>이동 루트</label>
                                    <button id="ins-move-route-btn" style="width: 100%; padding: 4px; background: #3a3a3a; border: 1px solid #555; border-radius: 2px; color: #fff; cursor: pointer; font-size: 11px;">설정</button>
                                </div>
                                <div class="ins-row" style="flex: 1;">
                                    <label>속도</label>
                                    <select id="ins-move-speed" style="width: 100%; padding: 4px; font-size: 11px;">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                    </select>
                                </div>
                                <div class="ins-row" style="flex: 1;">
                                    <label>빈도</label>
                                    <select id="ins-move-freq" style="width: 100%; padding: 4px; font-size: 11px;">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- 실행 내용 탭 (별도) -->
                        <div id="ins-commands-content" class="ins-tab-content"
                            style="display: none; flex-direction: column; flex: 1; overflow: hidden;">
                            <section class="ins-section flex-fill" style="flex: 1; display: flex; flex-direction: column; overflow: hidden;">
                                <div class="ins-label">실행 내용</div>
                                <div id="ins-contents-list"
                                    style="flex: 1; background: #1a1a1a; border: 1px solid #444; border-radius: 2px; overflow-y: auto; padding: 6px; font-family: 'Courier New', monospace;">
                                </div>
                            </section>
                        </div>
                    </div>
            </aside>
        </main>
    </div>



    <script src="script/TileManager.js"></script>
    <script src="script/FieldEditor.js"></script>
    <script src="script/EventManager.js"></script>
    <script src="script/_main.js"></script>
</body>
<div id="context-menu" class="hidden" style="position: fixed;">
    <div onclick="editor.editMap()">편집</div>
    <div onclick="editor.deleteMap()">제거</div>
</div>

</html>